<view class="page" wx:if="{{room}}">
  <view class="card">
    <view>æˆ¿é—´ {{room.id}} | åº•æ±  {{room.pot}}</view>
    <view>è½®åˆ°ï¼š{{room.players[room.currentTurn].nickName}}</view>
    <view>é˜¶æ®µï¼š{{room.stage}}</view>
  </view>

  <view class="card table-overview">
    <view class="overview-title">ç‰Œæ¡Œè§†å›¾</view>
    <view class="overview-pot">åº•æ± æ€»é¢ï¼š{{room.pot}}</view>
    <view class="overview-row" wx:for="{{playerViews}}" wx:key="id">
      <text>{{item.nickName}}ï¼ˆ{{item.positionLabel}}ï¼‰</text>
      <text>æœ¬è½®ä¸‹æ³¨ï¼š{{item.stageBet || 0}}</text>
      <text wx:if="{{item.folded}}" class="fold-mark">âœ•</text>
    </view>
  </view>

  <view class="players">
    <view class="player card pixel {{item.isCurrent ? 'player-current' : ''}}" wx:for="{{playerViews}}" wx:key="id" bindtap="onTapPlayer" data-player-id="{{item.id}}">
      <image class="avatar" src="{{item.avatarUrl}}"></image>
      <view>{{item.nickName}} (Seat {{item.seat}} Â· {{item.positionLabel}})</view>
      <view>ç­¹ç ï¼š{{item.chips}}</view>
      <view class="stack-row">
        <text class="chip chip-10">10: {{(item.chipStacks && item.chipStacks.chip10) || 0}}</text>
        <text class="chip chip-20">20: {{(item.chipStacks && item.chipStacks.chip20) || 0}}</text>
        <text class="chip chip-50">50: {{(item.chipStacks && item.chipStacks.chip50) || 0}}</text>
      </view>
      <view wx:if="{{item.folded}}">å·²å¼ƒç‰Œ</view>
      <view wx:if="{{item.allIn}}">ALL-IN</view>
    </view>
  </view>

  <view class="card">
    <view>ä¸‹æ³¨ç­¹ç ï¼ˆç‚¹å‡»å åŠ ï¼‰</view>
    <view class="chip-row">
      <button
        wx:for="{{chipOptions}}"
        wx:key="key"
        data-key="{{item.key}}"
        bindtap="onPickChip"
        class="{{item.colorClass}}">
        +{{item.label}}ï¼ˆä½™ {{item.remain}}ï¼‰
      </button>
    </view>
    <view>å½“å‰åŠ æ³¨é¢ï¼š{{raiseAmount}}</view>
    <view class="picked">å·²é€‰ï¼š10x{{pickedChips.chip10}} / 20x{{pickedChips.chip20}} / 50x{{pickedChips.chip50}}</view>
    <button size="mini" bindtap="onResetPick">æ¸…ç©ºå·²é€‰ç­¹ç </button>
    <view animation="{{chipAnimData}}" class="chip-anim">ğŸª™</view>
  </view>

  <view class="card actions">
    <button bindtap="onCheck">Check</button>
    <button class="btn-warn" bindtap="onRaise">Raise</button>
    <button bindtap="onFold">Fold</button>
  </view>

  <view class="card" wx:if="{{isOwner}}">
    <view>æˆ¿ä¸»ç»“ç®—ï¼šå‹¾é€‰èµ¢å®¶ååˆ†æ± </view>
    <checkbox-group bindchange="onWinnerChange">
      <label wx:for="{{room.players}}" wx:key="id" class="winner-item">
        <checkbox value="{{item.id}}" />{{item.nickName}}
      </label>
    </checkbox-group>
    <button class="btn-primary" bindtap="onSettle">ç»“ç®—æœ¬å±€</button>
  </view>
</view>
